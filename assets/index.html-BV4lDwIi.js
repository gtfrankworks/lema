import{a as s,c as a,b as n,o as t}from"./app-ZQgO6-gU.js";const i={};function l(d,e){return t(),a("div",null,e[0]||(e[0]=[n(`<p>MyBatis-Flex 主要是和 <code>MyBatis-Plus</code> 与 <code>Fluent-MyBatis</code> 对比，内容来源其官网、git 或者 网络文章，若有错误欢迎纠正。</p><ul><li>MyBatis-Plus：老牌的 MyBatis 增强框架，开源于 2016 年。</li><li>Fluent-MyBatis：阿里云开发的 MyBatis 增强框架（来自于阿里云·云效产品团队）</li></ul><blockquote><p>本文只阐述了「功能」方面的对比，<strong>「性能」</strong> 对比请参考 <a href="https://mybatis-flex.com/zh/intro/benchmark.html" target="_blank" rel="noopener noreferrer">这里</a>。 若发现对比中有错误，请加入 MyBatis-Flex QQ 交流群：532992631，然后联系群主纠正。</p></blockquote><h2 id="功能对比" tabindex="-1"><a class="header-anchor" href="#功能对比"><span>功能对比</span></a></h2><table><thead><tr><th style="text-align:left;">功能或特点</th><th style="text-align:left;">MyBatis-Flex</th><th style="text-align:left;">MyBatis-Plus</th><th style="text-align:left;">Fluent-MyBatis</th></tr></thead><tbody><tr><td style="text-align:left;">对 entity 的基本增删改查</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">分页查询</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">分页查询之总量缓存</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">分页查询无 SQL 解析设计（更轻量，及更高性能）</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">多表查询： from 多张表</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">多表查询： left join、inner join 等等</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">多表查询： union，union all</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">单主键配置</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">多种 id 生成策略</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">支持多主键、复合主键</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">字段的 typeHandler 配置</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">除了 MyBatis，无其他第三方依赖（更轻量）</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">QueryWrapper 是否支持在微服务项目下进行 RPC 传输</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">未知</td></tr><tr><td style="text-align:left;">逻辑删除</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">乐观锁</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">SQL 审计</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">数据填充</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td></tr><tr><td style="text-align:left;">数据脱敏</td><td style="text-align:left;">✅</td><td style="text-align:left;">✔️ <strong>（收费）</strong></td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">字段权限</td><td style="text-align:left;">✅</td><td style="text-align:left;">✔️ <strong>（收费）</strong></td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">字段加密</td><td style="text-align:left;">✅</td><td style="text-align:left;">✔️ <strong>（收费）</strong></td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">字典回写</td><td style="text-align:left;">✅</td><td style="text-align:left;">✔️ <strong>（收费）</strong></td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">Db + Row</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">Entity 监听</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">多数据源支持</td><td style="text-align:left;">✅</td><td style="text-align:left;">借助其他框架或收费</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">多数据源是否支持 Spring 的事务管理，比如 <code>@Transactional</code> 和 <code>TransactionTemplate</code> 等</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">多数据源是否支持 &quot;非Spring&quot; 项目</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">多租户</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">动态表名</td><td style="text-align:left;">✅</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td></tr><tr><td style="text-align:left;">动态 Schema</td><td style="text-align:left;">✅</td><td style="text-align:left;">❌</td><td style="text-align:left;">❌</td></tr></tbody></table><blockquote><p>以上内容来自第三方相关产品的官方文档或第三方平台，若有错误，欢迎纠正。</p></blockquote><h2 id="基础查询" tabindex="-1"><a class="header-anchor" href="#基础查询"><span>基础查询</span></a></h2><p><strong>MyBatis-Flex：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>QueryWrapper query = QueryWrapper.create()</span></span>
<span class="line"><span>        .where(EMPLOYEE.LAST_NAME.like(searchWord)) //条件为null时自动忽略</span></span>
<span class="line"><span>        .and(EMPLOYEE.GENDER.eq(1))</span></span>
<span class="line"><span>        .and(EMPLOYEE.AGE.gt(24));</span></span>
<span class="line"><span>List&lt;Employee&gt; employees = employeeMapper.selectListByQuery(query);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MyBatis-Plus：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>QueryWrapper&lt;Employee&gt; queryWrapper = Wrappers.query()</span></span>
<span class="line"><span>        .like(searchWord != null, &quot;last_name&quot;, searchWord)</span></span>
<span class="line"><span>        .eq(&quot;gender&quot;, 1)</span></span>
<span class="line"><span>        .gt(&quot;age&quot;, 24);</span></span>
<span class="line"><span>List&lt;Employee&gt; employees = employeeMapper.selectList(queryWrapper);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者 MyBatis-Plus 的 lambda 写法：</p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>LambdaQueryWrapper&lt;Employee&gt; queryWrapper = Wrappers.&lt;Employee&gt;lambdaQuery()</span></span>
<span class="line"><span>        .like(StringUtils.isNotEmpty(searchWord), Employee::getUserName,&quot;B&quot;)</span></span>
<span class="line"><span>        .eq(Employee::getGender, 1)</span></span>
<span class="line"><span>        .gt(Employee::getAge, 24);</span></span>
<span class="line"><span>List&lt;Employee&gt; employees = employeeMapper.selectList(queryWrapper);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Fluent-MyBatis：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>EmployeeQuery query = new EmployeeQuery()</span></span>
<span class="line"><span>    .where.lastName().like(searchWord, If::notNull)</span></span>
<span class="line"><span>    .and.gender().eq(1)</span></span>
<span class="line"><span>    .and.age().gt(24)</span></span>
<span class="line"><span>    .end();</span></span>
<span class="line"><span>List&lt;Employee&gt; employees = employeeMapper.listEntity(query);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="查询集合函数" tabindex="-1"><a class="header-anchor" href="#查询集合函数"><span>查询集合函数</span></a></h2><p><strong>MyBatis-Flex：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>QueryWrapper query = QueryWrapper.create()</span></span>
<span class="line"><span>    .select(</span></span>
<span class="line"><span>        ACCOUNT.ID,</span></span>
<span class="line"><span>        ACCOUNT.USER_NAME,</span></span>
<span class="line"><span>        max(ACCOUNT.BIRTHDAY),</span></span>
<span class="line"><span>        avg(ACCOUNT.SEX).as(&quot;sex_avg&quot;)</span></span>
<span class="line"><span>    );</span></span>
<span class="line"><span>List&lt;Employee&gt; employees = employeeMapper.selectListByQuery(query);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MyBatis-Plus：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>QueryWrapper&lt;Employee&gt; queryWrapper = Wrappers.query()</span></span>
<span class="line"><span>    .select(</span></span>
<span class="line"><span>        &quot;id&quot;,</span></span>
<span class="line"><span>        &quot;user_name&quot;,</span></span>
<span class="line"><span>        &quot;max(birthday)&quot;,</span></span>
<span class="line"><span>        &quot;avg(birthday) as sex_avg&quot;</span></span>
<span class="line"><span>    );</span></span>
<span class="line"><span>List&lt;Employee&gt; employees = employeeMapper.selectList(queryWrapper);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>缺点：字段硬编码，容易拼错。无法使用 ide 的字段进行重构，无法使用 IDE 自动提示，发生错误不能及时发现。</p></blockquote><p><strong>Fluent-MyBatis：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>EmployeeQuery query = new EmployeeQuery()</span></span>
<span class="line"><span>        .select</span></span>
<span class="line"><span>        .id()</span></span>
<span class="line"><span>        .userName()</span></span>
<span class="line"><span>        .max.birthday()</span></span>
<span class="line"><span>        .avg.sex(&quot;sex_avg&quot;)</span></span>
<span class="line"><span>        .end()</span></span>
<span class="line"><span>List&lt;Employee&gt; employees = employeeMapper.listEntity(query);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>缺点：编写内容不符合 sql 直觉。</p></blockquote><h2 id="and-和-or" tabindex="-1"><a class="header-anchor" href="#and-和-or"><span>and(...) 和 or(...)</span></a></h2><p>假设我们要构建如下的 SQL 进行查询（需要在 SQL 中添加括号）。</p><p>sql</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>SELECT * FROM tb_account</span></span>
<span class="line"><span>WHERE id &gt;= 100</span></span>
<span class="line"><span>AND (sex = 1 OR sex = 2)</span></span>
<span class="line"><span>OR (age IN (18,19,20) AND user_name LIKE &quot;%michael%&quot; )</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MyBatis-Flex：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>QueryWrapper query = QueryWrapper.create()</span></span>
<span class="line"><span>    .where(ACCOUNT.ID.ge(100))</span></span>
<span class="line"><span>    .and(ACCOUNT.SEX.eq(1).or(ACCOUNT.SEX.eq(2)))</span></span>
<span class="line"><span>    .or(ACCOUNT.AGE.in(18, 19, 20).and(ACCOUNT.USER_NAME.like(&quot;michael&quot;)));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MyBatis-Plus：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>QueryWrapper&lt;Employee&gt; query = Wrappers.query()</span></span>
<span class="line"><span>        .ge(&quot;id&quot;, 100)</span></span>
<span class="line"><span>        .and(i -&gt; i.eq(&quot;sex&quot;, 1).or(x -&gt; x.eq(&quot;sex&quot;, 2)))</span></span>
<span class="line"><span>        .or(i -&gt; i.in(&quot;age&quot;, 18, 19, 20).like(&quot;user_name&quot;, &quot;michael&quot;));</span></span>
<span class="line"><span>// or lambda</span></span>
<span class="line"><span>LambdaQueryWrapper&lt;Employee&gt; query = Wrappers.&lt;Employee&gt;lambdaQuery()</span></span>
<span class="line"><span>        .ge(Employee::getId, 100)</span></span>
<span class="line"><span>        .and(i -&gt; i.eq(Employee::getSex, 1).or(x -&gt; x.eq(Employee::getSex, 2)))</span></span>
<span class="line"><span>        .or(i -&gt; i.in(Employee::getAge, 18, 19, 20).like(Employee::getUserName, &quot;michael&quot;));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Fluent-MyBatis：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>AccountQuery query = new AccountQuery()</span></span>
<span class="line"><span>    .where.id().ge(100)</span></span>
<span class="line"><span>    .and(</span></span>
<span class="line"><span>            new AccountQuery().where.sex().eq(1).or(</span></span>
<span class="line"><span>                new AccountQuery().where.sex().eq(2).end()</span></span>
<span class="line"><span>    ).end())</span></span>
<span class="line"><span>    .or(</span></span>
<span class="line"><span>        new AccountQuery().where.age.in(18,19,20)</span></span>
<span class="line"><span>            .and.userName().like(&quot;michael&quot;).end()</span></span>
<span class="line"><span>    )</span></span>
<span class="line"><span>    .end();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>缺点：许多 <code>.end()</code> 方法调用，容易忘记出错（或者写错了？欢迎纠正）。</p></blockquote><h2 id="多表查询-1" tabindex="-1"><a class="header-anchor" href="#多表查询-1"><span>多表查询 1</span></a></h2><p><strong>MyBatis-Flex：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>QueryWrapper query = QueryWrapper.create()</span></span>
<span class="line"><span>    .select().from(ACCOUNT)</span></span>
<span class="line"><span>    .leftJoin(ARTICLE).on(ACCOUNT.ID.eq(ARTICLE.ACCOUNT_ID))</span></span>
<span class="line"><span>    .where(ACCOUNT.AGE.ge(10));</span></span>
<span class="line"><span></span></span>
<span class="line"><span>List&lt;Account&gt; accounts = mapper.selectListByQuery(query);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MyBatis-Plus：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>// 不支持~~~~</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Fluent-MyBatis：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>StudentQuery leftQuery = new StudentQuery(&quot;a1&quot;).selectAll()</span></span>
<span class="line"><span>    .where.age().eq(34)</span></span>
<span class="line"><span>    .end();</span></span>
<span class="line"><span>HomeAddressQuery rightQuery = new HomeAddressQuery(&quot;a2&quot;)</span></span>
<span class="line"><span>    .where.address().like(&quot;address&quot;)</span></span>
<span class="line"><span>    .end();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>IQuery query = leftQuery</span></span>
<span class="line"><span>    .join(rightQuery)</span></span>
<span class="line"><span>    .on(l -&gt; l.where.homeAddressId(), r -&gt; r.where.id()).endJoin()</span></span>
<span class="line"><span>    .build();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>List&lt;StudentEntity&gt; entities = this.mapper.listEntity(query);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>缺点：编写内容不符合 sql 直觉。同时在编写 <code>end()</code> 和 <code>endJoin()</code> 容易忘记。</p></blockquote><h2 id="多表查询-2" tabindex="-1"><a class="header-anchor" href="#多表查询-2"><span>多表查询 2</span></a></h2><p>假设查询的 SQL 如下：</p><p>sql</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>SELECT a.id, a.user_name, b.id AS articleId, b.title</span></span>
<span class="line"><span>FROM tb_account AS a, tb_article AS b</span></span>
<span class="line"><span>WHERE a.id = b.account_id</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MyBatis-Flex：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>QueryWrapper query = new QueryWrapper()</span></span>
<span class="line"><span>.select(</span></span>
<span class="line"><span>      ACCOUNT.ID</span></span>
<span class="line"><span>    , ACCOUNT.USER_NAME</span></span>
<span class="line"><span>    , ARTICLE.ID.as(&quot;articleId&quot;)</span></span>
<span class="line"><span>    , ARTICLE.TITLE)</span></span>
<span class="line"><span>.from(ACCOUNT.as(&quot;a&quot;), ARTICLE.as(&quot;b&quot;))</span></span>
<span class="line"><span>.where(ACCOUNT.ID.eq(ARTICLE.ACCOUNT_ID));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MyBatis-Plus：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>// 不支持~~~~</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Fluent-MyBatis：</strong></p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>// 不支持~~~~</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>PS：也有可能是笔者自己不知道如何支持，而非 Fluent-MyBatis 原因，有知道的同学可以给下示例代码。</p></blockquote><h2 id="部分字段更新" tabindex="-1"><a class="header-anchor" href="#部分字段更新"><span>部分字段更新</span></a></h2><p>假设一个实体类 Account 中，我们要更新其内容如下：</p><ul><li><code>userName</code> 为 &quot;michael&quot;</li><li><code>age</code> 为 &quot;18&quot;</li><li><code>birthday</code> 为 null</li></ul><p>其他字段保持数据库原有内容不变，要求执行的 SQL 如下：</p><p>sql</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>update tb_account</span></span>
<span class="line"><span>set user_name = &quot;michael&quot;, age = 18, birthday = null</span></span>
<span class="line"><span>where id = 100</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MyBatis-Flex</strong> 代码如下：</p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>Account account = UpdateEntity.of(Account.class);</span></span>
<span class="line"><span>account.setId(100); //设置主键</span></span>
<span class="line"><span>account.setUserName(&quot;michael&quot;);</span></span>
<span class="line"><span>account.setAge(18);</span></span>
<span class="line"><span>account.setBirthday(null);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>accountMapper.update(account);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>MyBatis-Plus</strong> 代码如下（或可使用 MyBatis-Plus 的 <code>LambdaUpdateWrapper</code>，但性能没有 <code>UpdateWrapper</code> 好）：</p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>UpdateWrapper&lt;Account&gt; updateWrapper = new UpdateWrapper&lt;&gt;();</span></span>
<span class="line"><span>updateWrapper.eq(&quot;id&quot;, 100);</span></span>
<span class="line"><span>updateWrapper.set(&quot;user_name&quot;, &quot;michael&quot;);</span></span>
<span class="line"><span>updateWrapper.set(&quot;age&quot;, 18);</span></span>
<span class="line"><span>updateWrapper.set(&quot;birthday&quot;, null);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>accountMapper.update(null, updateWrapper);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Fluent-MyBatis</strong> 代码如下：</p><p>java</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>AccountUpdate update = new AccountUpdate()</span></span>
<span class="line"><span>.update.userName().is(&quot;michael&quot;)</span></span>
<span class="line"><span>.age().is(18)</span></span>
<span class="line"><span>.birthday().is(null)</span></span>
<span class="line"><span>.end()</span></span>
<span class="line"><span>.where.id().eq(100)</span></span>
<span class="line"><span>.end();</span></span>
<span class="line"><span>accountMapper.updateBy(update);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,85)]))}const r=s(i,[["render",l]]),c=JSON.parse('{"path":"/framework/mybatisflex/base/9l6vv0yp/","title":"MyBatis-Flex功能","lang":"zh-CN","frontmatter":{"title":"MyBatis-Flex功能","createTime":"2025/08/26 17:13:16","permalink":"/framework/mybatisflex/base/9l6vv0yp/"},"readingTime":{"minutes":4.08,"words":1224},"git":{"createdTime":1756736713000},"filePathRelative":"notes/framework/mybatisflex/base/MyBatis-Flex功能.md","headers":[]}');export{r as comp,c as data};
