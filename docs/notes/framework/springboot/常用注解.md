---
title: 常用注解
createTime: 2025/08/27 16:33:12
permalink: /framework/springboot/qtcaagcj/
---
# 常用注解

## 1.组件注册

### 1.1.@Configuration`、`@SpringBootConfiguration

```java
@Configuration
public class AppConfig {
    @Bean
    public MyService myService() {
        return new MyServiceImpl();
    }
}
```

在上面的示例中，我们使用 `@Configuration` 注解来声明一个 Spring 配置类，并在其中定义了一个名为 `myService()` 的 Bean。这个 Bean 交由 Spring 容器进行托管管理，可以通过容器获取它并调用它的方法。

### 1.2.@Bean`、`@Scope

```java
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class AppConfig {
    @Bean("myService")
    @Scope("prototype")
    public MyService myService() {
        return new MyServiceImpl();
    }
}
```

在上面的示例中，我们使用 `@Bean` 注解来创建名为 `myService` 的 Bean 对象，并指定它的作用域为 `prototype`，表示每次获取该 Bean 时都会创建一个新的实例对象。这个 Bean 会被 Spring 容器托管管理，可以在其它组件中使用。

### 1.3.@Controller`、`@Service`、`@Repository`、`@Component

```java
@Service
public class UserServiceImpl implements UserService {
    @Autowired
    private UserDao userDao;

    @Override
    public User getUserById(Long id) {
        return userDao.getUserById(id);
    }
}

@Repository
public class UserDaoImpl implements UserDao {
    @Override
    public User getUserById(Long id) {
        // ...
    }
}
```

在上面的示例中，我们分别使用 `@Service` 和 `@Repository` 注解来声明服务和数据访问组件，这些组件会被 Spring 容器进行托管管理，并可以在其它组件中自动注入。另外，`@Controller` 注解也可以用于声明控制器组件，`@Component` 则是一个通用的组件注解。

### 1.4.@Import

```java
@Configuration
@Import({DaoConfig.class, ServiceConfig.class})
public class AppConfig {
    // ...
}
```

在上面的示例中，我们使用 `@Import` 注解来导入另外两个配置类 `DaoConfig` 和 `ServiceConfig`，以便在当前应用程序上下文中注册相关的 Bean 或配置。

### 1.5.@ComponentScan

```java
@Configuration
@ComponentScan(basePackages = {"com.example.project.service", "com.example.project.dao"})
public class AppConfig {
    // ...
}
```

在上面的示例中，我们使用 `@ComponentScan` 注解配置 Spring 组件的扫描范围，指定了 `com.example.project.service` 和 `com.example.project.dao` 两个包及其子包中的组件都会被扫描到并注册为 Bean。

### 1.6.@component

`@Component` 是 Spring 框架中的一个注解，它表示当前标注的类是一个组件类，需要被 Spring 管理。通常情况下，我们使用 `@Component` 注解来声明一个普通的 bean，这个 bean 可以在整个应用程序中被其他组件引用和使用。

具体来说，使用 `@Component` 注解需要按照以下步骤进行：

1. 在需要被 Spring 管理的 Java 类上添加 `@Component` 注解。
2. 在需要使用这个 bean 的地方使用 `@Autowired` 注解进行自动注入。

例如，下面是一个简单的例子：

```java
@Component
public class MyService {

    public void sayHello() {
        System.out.println("Hello, world!");
    }
}
```

在上述代码中，我们定义了一个名为 `MyService` 的 bean，它使用了 `@Component` 注解，表示这是一个 Spring 管理的组件，并且可以被其他组件引用和使用。该 bean 中有一个名为 `sayHello()` 的方法，用于输出一段简单的问候语。

接着，我们可以在需要使用 `MyService` 的组件中使用 `@Autowired` 注解来自动注入该 bean：

```java
@Service
public class MyServiceImpl implements MyService {

    @Autowired
    private MyService myService;

    @Override
    public void hello() {
        myService.sayHello();
    }
}
```

在上述代码中，我们声明了一个名为 `MyServiceImpl` 的服务实现类，并使用 `@Service` 注解表示这是一个服务组件。在该组件中，我们使用 `@Autowired` 注解自动注入了 `MyService` bean，并在 `hello()` 方法中调用了该 bean 的 `sayHello()` 方法。

总之，`@Component` 是 Spring 中最基本的注解之一，它让我们可以轻松地声明和管理 bean，并且利用 Spring 框架提供的依赖注入机制来进行组件之间的协作。

## .2.条件注解

Spring Boot 中的条件注解是一种特殊的注解，当满足特定条件时才会创建或注册一个 bean 或配置类。这种方式可以让我们根据应用程序当前的环境、配置、状态等情况来动态地决定 bean 和配置类是否需要被创建或注册，以及创建或注册的方式和内容。

### 2.1.@Conditional

在 Spring Boot 中，条件注解通常都是以 `@Conditional` 开头的，它们都实现了 `Condition` 接口。使用条件注解一般有以下几个步骤：

1. 创建一个 Java 类，实现 `Condition` 接口，实现 `matches()` 方法来判断是否满足特定条件。如下面的例子：

   ```java
   public class LinuxCondition implements Condition {
   
       @Override
       public boolean matches(ConditionContext conditionContext, AnnotatedTypeMetadata annotatedTypeMetadata) {
           String os = conditionContext.getEnvironment().getProperty("os.name");
           return os != null && os.toLowerCase().contains("linux");
       }
   }
   ```

2. 在需要进行条件化配置的 bean 或配置类上添加条件注解，配合上面实现的 `Condition` 类进行动态配置。如下面的例子：

   ```java
   @Configuration
   @Conditional(LinuxCondition.class)
   public class LinuxServiceConfig {
   
       @Bean
       public MyService myService() {
           return new LinuxService();
       }
   }
   ```

在上述代码中，我们定义了一个名为 `LinuxServiceConfig` 的配置类，使用 `@Conditional(LinuxCondition.class)` 注解来根据当前系统是 Linux 系统还是其它操作系统来决定是否创建 `LinuxService` bean。如果当前系统是 Linux 系统，那么就会创建 `LinuxService` bean，并且将其注册为 `MyService` 类型的 bean。

值得注意的是，条件注解并不是只有 `@Conditional` 一种，Spring Boot 还提供了很多实现了 `Condition` 接口的注解，如 `@ConditionalOnBean`、`@ConditionalOnMissingBean`、`@ConditionalOnClass`、`@ConditionalOnWebApplication` 等。

### 2.2.@ConditionalOnBean

`@ConditionalOnBean` 注解会检查指定的 Bean 是否存在于 Spring 容器中，如果存在，则自动配置当前 Bean。

例如：

```java
@Configuration
public class MyConfig {

    @Bean
    @ConditionalOnBean(DataSource.class)
    public JdbcTemplate jdbcTemplate(DataSource dataSource) {
        return new JdbcTemplate(dataSource);
    }
}
```

从上面的例子中，我们可以看出当 `DataSource` 这个 Bean 存在时，才会进行 `jdbcTemplate` 的自动配置。

### 2.3.@ConditionalOnMissingBean

`@ConditionalOnMissingBean` 注解会先检查指定的名称的 Bean 在 Spring 容器中是否存在，如果不存在，则自动配置当前 Bean。

例如：

```java
@Configuration
public class MyConfig {

    @Bean
    @ConditionalOnMissingBean(JdbcTemplate.class)
    public JdbcTemplate jdbcTemplate(DataSource dataSource) {
        return new JdbcTemplate(dataSource);
    }
}
```

从上面的例子中，我们可以看出，只有当 `JdbcTemplate` 这个 Bean 不存在时，才会进行 `jdbcTemplate` 的自动配置。

### 2.4.@ConditionalOnClass

`@ConditionalOnClass` 注解会检查指定的类是否存在于项目的 ClassPath 中，如果存在，则自动配置当前 Bean。

例如：

```java
@Configuration
@ConditionalOnClass(name="com.alibaba.dubbo.config.RegistryConfig")
public class MyConfig {

    // ...
}
```

从上面的例子中，我们可以看出当 `com.alibaba.dubbo.config.RegistryConfig` 这个类存在时，才会自动配置 `MyConfig`。

### 2.5.@ConditionalOnWebApplication

`@ConditionalOnWebApplication` 注解会检查当前项目是否为 Web 应用程序，并且支持过滤 Servlet 和 Reactive 应用程序。

例如：

```java
@Configuration
@ConditionalOnWebApplication(type = ConditionalOnWebApplication.Type.SERVLET)
public class MyConfig {

    // ...
}
```

从上面的例子中，我们可以看出当当前项目为 Servlet 应用程序时，才会自动配置 `MyConfig`。

综上所述，Spring Boot 中的条件注解提供了一种优雅、灵活的使用方式以进行自动化配置，减少了冗余的代码，并大大增强了系统的可扩展性。

## 3.属性绑定

### 3.1.@Value

`@Value`可以用于注入单个属性值，支持SpEL表达式，可以直接将配置文件中的值注入到Java对象中

例如：

1. 创建实体类

   ```java
   public class Dog {
       @Value("${dog.name}")
       private String name;
       @Value("${dog.age}")
       private Integer age;
   
       public Dog() {
   
       }
       //省略toString()、Get、Set方法、构造方法
   }
   ```

2. 配置文件

   ```properties
   dog.name=wangcai
   dog.age=44
   ```

3. 配置类

   ```java
   @Configuration
   public class AppConfig4  {
       @Bean
       public Dog dog() {
           return  new Dog();
       }
   }
   ```

4. 使用

   ```java
   public static void main(String[] args) {
           var applicationContext=SpringApplication.run(Boot303DemoApplication.class, args);
           Dog dog=applicationContext.getBean(Dog.class);
           System.out.println("dog = " + dog);
       }
   ```

   

### 3.2.@ConfigurationProperties

`@ConfigurationProperties`可以将一个或多个配置文件中的属性映射到Java对象中，也可以使用前缀来匹配属性。

例如：

1. 创建实体类

   ```java
   package com.satan.boot.bean;
   
   import org.springframework.boot.context.properties.ConfigurationProperties;
   
   @ConfigurationProperties(prefix = "user")
   public class User {
   
       private String name;
   
       private int age;
   
       //省略toString()、Get、Set方法、构造方法
   }
   ```

   

2. 配置文件

   ```properties
   user.name=zhangsan
   user.age=12
   ```

3. 配置类

   ```java
   package com.satan.boot.config;
   
   import com.satan.boot.bean.Student;
   import org.springframework.context.annotation.Bean;
   import org.springframework.context.annotation.Configuration;
   import org.springframework.context.annotation.PropertySource;
   
   /**
    * @ClassName AppConfig3
    * @Description TODO
    * @date 2023/6/3 18:29
    * @Version 1.0
    */
   @Configuration
   public class AppConfig {
       @Bean
       public User user(){
           return new User();
       }
       
       //或者
       @Bean
       @ConfigurationProperties(prefix = "user")//将此注解从实体类移动到此处
   	public User user(){
           return new User();
       }
   
   }
   
   ```

4. 使用

   ```java
   public static void main(String[] args) {
           var applicationContext = SpringApplication.run(Boot303DemoApplication.class, args);
           User user = applicationContext.getBean(User.class);
           System.out.println("user = " + user);     
       }
   ```

### 3.3.@EnableConfigurationProperties

`@EnableConfigurationProperties`用于开启`@ConfigurationProperties`注解的自动配置功能。

例如：

1. 创建实体类

   ```java
   package com.satan.boot.bean;
   
   import org.springframework.boot.context.properties.ConfigurationProperties;
   
   @ConfigurationProperties(prefix = "person")
   public class Person {
   
       private String name;
   
       private int age;
   	//省略toString()、Get、Set方法、构造方法
       
   }
   ```

2. 配置文件

   ```properties
   person.name=zhangsan
   person.age=12
   ```

3. 配置类

   ```java
   @Configuration
   @EnableConfigurationProperties(Person.class)
   public class AppConfig2 {
   
   }
   ```

4. 使用

   ```java
   package com.satan.boot;
   
   import com.satan.boot.bean.Dog;
   import com.satan.boot.bean.Person;
   import com.satan.boot.bean.Student;
   import com.satan.boot.bean.User;
   import org.springframework.boot.SpringApplication;
   import org.springframework.boot.autoconfigure.SpringBootApplication;
   
   @SpringBootApplication
   public class Boot303DemoApplication {
   
       public static void main(String[] args) {
           var applicationContext = SpringApplication.run(Boot303DemoApplication.class, args);
           Person person = applicationContext.getBean(Person.class);
           System.out.println("person = " + person);     
       }
   
   }
   
   ```

   

### 3.4.@PropertySource

`@PropertySource`用于指定加载的外部属性文件，可以使用${}表达式引用外部文件中的属性值。

例如：

1. 创建实体类

   ```java
   package com.satan.boot.bean;
   
   import org.springframework.boot.context.properties.ConfigurationProperties;
   
   /**
    * @ClassName Student
    * @Description TODO
    * @date 2023/6/3 18:13
    * @Version 1.0
    */
   @ConfigurationProperties(value = "student")
   public class Student {
       private String name;
       private int age;
   	//省略toString()、Get、Set方法、构造方法
       
   }
   
   ```

2. 配置文件

   ```properties
   student.name=studyA
   student.age=22
   ```

3. 配置类

   ```java
   package com.satan.boot.config;
   
   import com.satan.boot.bean.Student;
   import org.springframework.context.annotation.Bean;
   import org.springframework.context.annotation.Configuration;
   import org.springframework.context.annotation.PropertySource;
   
   @Configuration
   @PropertySource("classpath:hello.properties")
   public class AppConfig3 {
       @Bean
       public Student student(){
           return new Student();
       }
   
   
   }
   
   ```

4. 使用

   ```java
   package com.satan.boot;
   
   import com.satan.boot.bean.Dog;
   import com.satan.boot.bean.Person;
   import com.satan.boot.bean.Student;
   import com.satan.boot.bean.User;
   import org.springframework.boot.SpringApplication;
   import org.springframework.boot.autoconfigure.SpringBootApplication;
   
   @SpringBootApplication
   public class Boot303DemoApplication {
   
       public static void main(String[] args) {
           var applicationContext = SpringApplication.run(Boot303DemoApplication.class, args);
           Student student = applicationContext.getBean(Student.class);
           System.out.println("student = " + student);     
       }
   
   }
   
   ```

   